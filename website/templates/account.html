{% extends "base.html" %}
{% block content %}
<style>
  html {
    height: 100%;
  }
  body{
    background: rgb(46,48,46);
    min-height: 100%;
  }
  .hide {
      display: none;
  }
  .menu {
    margin-top: 50px;
    list-style: none;
  }
  #pages {
    min-height: 100%;
    color: white;
  }
  .container{
    margin-top: 100px;
    height: 100%;

  }
  .row {
    background: white;
    border-radius: 30px;
    box-shadow: 12px 12px 22px grey;
  }
  #footer {
    right: 0px; bottom: 0px; left: 0px;
    position: absolute;
    width: 100%;
    height: 218px;
  }
  section{
    padding-bottom: 218px;
  }
</style>
<canvas id="cas" class='background'style='position:fixed;top:0;z-index:-1'></canvas>
<section>
<!-- For flash messages -->
  <div class="col-md-8">
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        {% for category, message in messages %}
          <div class="alert alert-{category}">
            {{ message }}
          </div>
        {% endfor %}
      {% endif %}
    {% endwith %}
  </div>

  <!-- Main profile menu -->
<div class="container">
  <ul class="menu" id="menu" >
    <li><a data-page="myReviews" href="#"><h3> My Reviews </h3> </a></li>
    <li><a data-page="myWhitelist" href="#"><h3> Whitelist </h3> </a></li>
    <li><a data-page="myBlacklist" href="#"><h3> Blacklist </h3> </a></li>
    <li><a data-page="mySettings" href="#"><h3> Settings </h3> </a></li>
</ul>

<!-- Each menu link, with filler text  -->
<div id="pages">
    <div id="myReviews" class="page" data-page="myReviews">
        <div class="row-4">
            <div class="col-12 pt-5">
                <h1> My Reviews </h1>
                <p> Wall-E: "Another out-of-this-world Pixar picture. And this time that label applies to the setting, too, as a lonely little robot named WALL-E finds and follows the lovely EVE across the universe." </p>
            </div>
        </div>
    </div>
    <div id="myWhitelist" class="page hide" data-page="myWhitelist">
        <div class="row-4">
            <div class="col-12 pt-5">
                <h1> Whitelisted Films </h1>
                <p> Up, Avengers: End Game, Cars 3 </p>
            </div>
        </div>
    </div>
    <div id="myBlacklist" class="page hide" data-page="myBlacklist">
        <div class="row-4">
            <div class="col-12 pt-5">
                <h1> Blacklisted Films </h1>
                <p> Vampire Man, Scary Movie </p>
            </div>
        </div>
    </div>
    <div id="mySettings" class="page hide" data-page="mySettings">
        <div class="row-4">
            <div class="col-12 pt-5">
                <h1> Settings </h1>
                <p> Username: {{current_user.username}}</p>
                <p> Display name: {{current_user.display_name}}</p>
                <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#security_questions">
                  Change Security Question's Answers
                </button>
                <!-- pop-up windwo for security questions -->
                <div id="security_questions" class="modal fade">
                  <div class="modal-dialog modal-dialog-centered" role="document">
                    <form class="form-signin" method="POST" action="">
                      {{ form1.hidden_tag() }}
                      <div class="modal-content">
                          <div class="modal-header">
                              <h4 class="modal-title text-xs-center">Security Questions</h4>
                          </div>

                          <div class="modal-body">
                            <div class="form-group">
                              <div class="col-lg-7 px-2 pt-2">
                                <fieldset class="form-group">
                                    {{ form1.question_1.label}}
                                    {% if form1.question_1.errors %}
                                        {{ form1.question_1 }}
                                        <div class="invalid-feedback">
                                          {% for error in form1.question_1.errors %}
                                              <span> {{ error}} </span>
                                          {% endfor %}
                                        </div>
                                        {% else %}
                                          {{ form1.question_1}}
                                          {% endif %}
                                          </fieldset>
                                        </div>
                                        </div>
                  <div class="form-group">
                    <div class="col-lg-7 px-2 pt-2">
                      <fieldset class="form-group">
                      <div class="input-field">
                          {{ form1.question_2.label}}
                          {% if form1.question_2.errors %}
                              {{ form1.question_2 }}
                              <div class="invalid-feedback">
                                {% for error in form1.question_2.errors %}
                                    <span> {{ error}} </span>
                                {% endfor %}
                              </div>
                              {% else %}
                                {{ form1.question_2}}
                                {% endif %}
                        </div>
                      </fieldset>
                    </div>
                  </div>
                <div class="form-group">
                    <div class="col-lg-7 px-2 pt-2">
                      <fieldset class="form-group">
                      <div class="input-field">
                          {{ form1.question_3.label}}
                          {% if form1.question_3.errors %}
                              {{ form1.question_3 }}
                              <div class="invalid-feedback">
                                {% for error in form1.question_3.errors %}
                                    <span> {{ error}} </span>
                                {% endfor %}
                              </div>
                              {% else %}
                                {{ form1.question_3}}
                                {% endif %}
                              </div>
                              </fieldset>
                            </div>
                          </div
                <div class="form-group">
		                <div class="col-lg-7 px-2 pt-2">
		                  <fieldset class="form-group">
		                  <div class="input-field">
		                      {{ form1.password.label}}
		                      {% if form1.password.errors %}
		                          {{ form1.password }}
		                          <div class="invalid-feedback">
		                            {% for error in form1.password.errors %}
		                                <span> {{ error}} </span>
		                            {% endfor %}
		                          </div>
		                          {% else %}
		                            {{ form1.password}}
		                            {% endif %}
		                  </div>
                      </fieldset>
                    </div>
                  </div>
                  <div class="form-row">
                    <div class="col-lg-7">
                      <div >
                        {{ form1.submit_change_q (class="submit-btn mt-3 mb-5")}}
                      </div>
                    </div>
                          </div>
                      </div><!-- /.modal-content -->
                  </div><!-- /.modal-dialog -->
                  </form>
            </div><!-- /.modal -->
            </div>
            </div>

            <!--For change password -->
            <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#change_password">
              Change Password
            </button>

            <div id="change_password" class="modal fade">
              <div class="modal-dialog modal-dialog-centered" role="document">
                  <div class="modal-content">
                      <div class="modal-header">
                          <h4 class="modal-title text-xs-center">Change Password</h4>
                      </div>
                      <form class="form-signin" method="POST" action="">
                        {{ form2.hidden_tag() }}
                      <div class="modal-body">
                        <div class="form-group">
                          <div class="col-lg-7 px-2 pt-2">
                            <fieldset class="form-group">
                                {{ form2.old_password.label}}
                                {% if form2.old_password.errors %}
                                    {{ form2.old_password }}
                                    <div class="invalid-feedback">
                                      {% for error in form2.old_password.errors %}
                                          <span> {{ error}} </span>
                                      {% endfor %}
                                    </div>
                                    {% else %}
                                      {{ form2.old_password}}
                                      {% endif %}
                                    </div>

                      <div class="form-group">
                          <div class="col-lg-7 px-2 pt-2">
                            <fieldset class="form-group">
                            <div class="input-field">
                                {{ form2.new_password.label}}
                                {% if form2.new_password.errors %}
                                    {{ form2.new_password }}
                                    <div class="invalid-feedback">
                                      {% for error in form2.new_password.errors %}
                                          <span> {{ error}} </span>
                                      {% endfor %}
                                    </div>
                                    {% else %}
                                      {{ form2.new_password}}
                                      {% endif %}
                      </div>
                    </div>
                  </div>
                      <div class="form-row">
                        <div class="col-lg-7">
                          <div >
                            {{ form2.submit_change_p (class="submit-btn mt-3 mb-5")}}
                          </div>
                        </div>
                              </div>
                          </div><!-- /.modal-content -->
                      </div><!-- /.modal-dialog -->
                      </form>
                </div><!-- /.modal -->
                </div>
                </div>
            </div>
        </div>
    </div>
</div>
</div>
</section>

<!-- Hiding/showiing content on the same div function -->
<script>
jQuery.noConflict(); //prevents jquery from interfering with other scripts
$(document).ready(function() {
    $("#menu li a").on('click', function(e) {
        e.preventDefault()
        var page = $(this).data('page');
        $("#pages .page:not('.hide')").stop().fadeOut('fast', function() {
            $(this).addClass('hide');
            $('#pages .page[data-page="'+page+'"]').fadeIn('slow').removeClass('hide'); //fading animation of the content in div
        });
    });
});
</script>

{% endblock content %}
